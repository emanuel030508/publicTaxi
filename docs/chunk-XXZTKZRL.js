import{a as P,b as f,c as H,d as z,e as A,f as D,g as B,h as O,i as q,j as R,k as $,l as K,m as J}from"./chunk-WG276LFX.js";import{a as j}from"./chunk-YIKV2MAF.js";import{$ as V,B as l,F as _,J as v,M as p,N as e,O as t,P as n,Q as w,R as u,S as g,U as C,V as i,W as S,X as b,Y as E,_ as M,ea as I,fa as T,ha as L,ia as F,na as G,o as y,oa as N,p as x,q as h,r as d,s as c}from"./chunk-XYZLSX6P.js";function U(a,o){a&1&&(e(0,"div",32),n(1,"div",33),t())}function W(a,o){if(a&1&&(e(0,"div",34)(1,"div",3),d(),e(2,"svg",35),n(3,"path",36),t(),c(),e(4,"div")(5,"h3",37),i(6,"Error al cargar datos"),t(),e(7,"p",38),i(8),t()()()()),a&2){let r=g();l(8),S(r.error)}}function X(a,o){if(a&1&&(e(0,"div",50),d(),e(1,"svg",51),n(2,"path",56),t(),i(3),t()),a&2){let r=g().$implicit;l(3),E(" ",r.marca," ",r.modelo," ",r.anio," ")}}function Y(a,o){if(a&1){let r=w();e(0,"div",41)(1,"div",42)(2,"div",43),d(),e(3,"svg",44),n(4,"path",6),t()(),c(),e(5,"span",45),i(6),t()(),e(7,"h3",46),i(8),t(),e(9,"p",47),i(10),t(),e(11,"div",48),v(12,X,4,3,"div",49),e(13,"div",50),d(),e(14,"svg",51),n(15,"path",52),t(),i(16),M(17,"number"),t()(),c(),e(18,"div",53)(19,"button",54),u("click",function(){let m=x(r).$implicit,k=g(2);return h(k.editCoche(m))}),i(20," Editar "),t(),e(21,"button",55),u("click",function(){let m=x(r).$implicit,k=g(2);return h(k.deleteCoche(m.id))}),i(22," Eliminar "),t()()()}if(a&2){let r=o.$implicit,s=g(2);l(5),C(s.getEstadoClass(r.estado)),l(),b(" ",r.estado," "),l(2),b(" ",r.matricula_completa," "),l(2),b("M\xF3vil: ",r.movil),l(2),p("ngIf",r.marca),l(4),b(" ",V(17,7,r.kilometros)," km ")}}function Z(a,o){if(a&1&&(e(0,"div",39),v(1,Y,23,9,"div",40),t()),a&2){let r=g();l(),p("ngForOf",r.coches)}}function ee(a,o){if(a&1){let r=w();e(0,"div",57)(1,"div",58),d(),e(2,"svg",59),n(3,"path",6),t()(),c(),e(4,"h3",60),i(5," No hay coches registrados "),t(),e(6,"p",61),i(7,"Comienza agregando tu primer veh\xEDculo"),t(),e(8,"button",62),u("click",function(){x(r);let m=g();return h(m.openModal())}),i(9," Agregar Coche "),t()()}}function te(a,o){a&1&&(d(),e(0,"svg",88),n(1,"circle",89)(2,"path",90),t())}function re(a,o){if(a&1){let r=w();e(0,"div",63)(1,"div",64)(2,"div",65)(3,"div",22)(4,"h2",7),i(5),t(),e(6,"button",66),u("click",function(){x(r);let m=g();return h(m.closeModal())}),d(),e(7,"svg",67),n(8,"path",68),t()()()(),c(),e(9,"form",69),u("ngSubmit",function(){x(r);let m=g();return h(m.onSubmit())}),e(10,"div",70)(11,"div")(12,"label",71),i(13,"Matr\xEDcula"),t(),n(14,"input",72),t(),e(15,"div")(16,"label",71),i(17,"M\xF3vil"),t(),n(18,"input",73),t()(),e(19,"div",74)(20,"div")(21,"label",71),i(22,"Marca"),t(),n(23,"input",75),t(),e(24,"div")(25,"label",71),i(26,"Modelo"),t(),n(27,"input",76),t(),e(28,"div")(29,"label",71),i(30,"A\xF1o"),t(),n(31,"input",77),t()(),e(32,"div")(33,"label",71),i(34,"Kil\xF3metros"),t(),n(35,"input",78),t(),e(36,"div")(37,"label",71),i(38,"Estado"),t(),e(39,"select",79)(40,"option",80),i(41,"Activo"),t(),e(42,"option",81),i(43,"Disponible"),t(),e(44,"option",82),i(45,"Inactivo"),t(),e(46,"option",83),i(47,"Mantenimiento"),t()()(),e(48,"div",84)(49,"button",85),u("click",function(){x(r);let m=g();return h(m.closeModal())}),i(50," Cancelar "),t(),e(51,"button",86),v(52,te,3,0,"svg",87),i(53),t()()()()()}if(a&2){let r=g();l(5),b(" ",r.editingCoche?"Editar Coche":"Nuevo Coche"," "),l(4),p("formGroup",r.cocheForm),l(42),p("disabled",r.cocheForm.invalid||r.saving),l(),p("ngIf",r.saving),l(),b(" ",r.saving?"Guardando...":r.editingCoche?"Actualizar":"Guardar"," ")}}var Q=class a{apiService=y(j);fb=y(K);coches=[];loading=!0;error=null;showModal=!1;saving=!1;editingCoche=null;cocheForm=this.fb.group({matricula:["",[f.required,f.maxLength(4)]],movil:["",[f.required,f.maxLength(4)]],marca:[""],modelo:[""],anio:[""],kilometros:[0],estado:["Activo",f.required]});ngOnInit(){this.loadCoches()}loadCoches(){this.loading=!0,this.error=null,this.apiService.getCoches().subscribe({next:o=>{this.coches=o,this.loading=!1},error:o=>{this.error=o.message,this.loading=!1}})}getEstadoClass(o){let r={Activo:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",Disponible:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",Inactivo:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",Mantenimiento:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300"};return r[o]||r.Inactivo}openModal(){this.editingCoche=null,this.cocheForm.reset({estado:"Activo",kilometros:0}),this.showModal=!0}editCoche(o){this.editingCoche=o,this.cocheForm.patchValue({matricula:o.matricula,movil:o.movil,marca:o.marca||"",modelo:o.modelo||"",anio:o.anio||"",kilometros:o.kilometros,estado:o.estado}),this.showModal=!0}closeModal(){this.showModal=!1,this.editingCoche=null,this.cocheForm.reset()}onSubmit(){if(this.cocheForm.invalid)return;this.saving=!0;let o=this.cocheForm.value;this.editingCoche?this.apiService.updateCoche(this.editingCoche.id,o).subscribe({next:()=>{this.saving=!1,this.closeModal(),this.loadCoches()},error:r=>{this.saving=!1,alert("Error al actualizar: "+r.message)}}):this.apiService.createCoche(o).subscribe({next:()=>{this.saving=!1,this.closeModal(),this.loadCoches()},error:r=>{this.saving=!1,alert("Error al crear: "+r.message)}})}deleteCoche(o){confirm("\xBFEst\xE1s seguro de que deseas eliminar este coche?")&&this.apiService.deleteCoche(o).subscribe({next:()=>{this.loadCoches()},error:r=>{alert("Error al eliminar: "+r.message)}})}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=_({type:a,selectors:[["app-coches"]],decls:46,vars:5,consts:[[1,"min-h-screen","bg-slate-50","dark:bg-slate-900"],[1,"fixed","left-0","top-0","h-full","w-64","bg-white","dark:bg-slate-800","border-r","border-slate-200","dark:border-slate-700","z-40"],[1,"p-6"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","bg-gradient-to-br","from-yellow-400","to-orange-500","rounded-xl","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"text-xl","font-bold","text-slate-800","dark:text-white"],[1,"px-4","py-4","space-y-1"],["routerLink","/dashboard","routerLinkActive","bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800",1,"flex","items-center","gap-3","px-4","py-3","rounded-lg","text-slate-600","dark:text-slate-400","hover:bg-slate-50","dark:hover:bg-slate-700/50","transition-colors","border","border-transparent"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],["routerLink","/choferes","routerLinkActive","bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800",1,"flex","items-center","gap-3","px-4","py-3","rounded-lg","text-slate-600","dark:text-slate-400","hover:bg-slate-50","dark:hover:bg-slate-700/50","transition-colors","border","border-transparent"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],["routerLink","/coches","routerLinkActive","bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800",1,"flex","items-center","gap-3","px-4","py-3","rounded-lg","text-slate-600","dark:text-slate-400","hover:bg-slate-50","dark:hover:bg-slate-700/50","transition-colors","border","border-transparent"],["routerLink","/recaudaciones","routerLinkActive","bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800",1,"flex","items-center","gap-3","px-4","py-3","rounded-lg","text-slate-600","dark:text-slate-400","hover:bg-slate-50","dark:hover:bg-slate-700/50","transition-colors","border","border-transparent"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"absolute","bottom-0","left-0","right-0","p-4","border-t","border-slate-200","dark:border-slate-700"],["routerLink","/",1,"flex","items-center","gap-3","px-4","py-3","rounded-lg","text-slate-600","dark:text-slate-400","hover:bg-slate-50","dark:hover:bg-slate-700/50","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],[1,"ml-64"],[1,"bg-white","dark:bg-slate-800","border-b","border-slate-200","dark:border-slate-700","px-8","py-4"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-slate-800","dark:text-white"],[1,"px-4","py-2","bg-gradient-to-r","from-yellow-400","to-orange-500","text-slate-900","font-semibold","rounded-lg","hover:from-yellow-300","hover:to-orange-400","transition-all","shadow-lg","shadow-yellow-500/20","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"p-8"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 mb-6",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",4,"ngIf"],[1,"flex","items-center","justify-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-yellow-500"],[1,"bg-red-50","dark:bg-red-900/20","border","border-red-200","dark:border-red-800","rounded-xl","p-6","mb-6"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-800","dark:text-red-200","font-semibold"],[1,"text-red-600","dark:text-red-400","text-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-shadow",4,"ngFor","ngForOf"],[1,"bg-white","dark:bg-slate-800","rounded-xl","p-6","border","border-slate-200","dark:border-slate-700","shadow-sm","hover:shadow-md","transition-shadow"],[1,"flex","items-start","justify-between","mb-4"],[1,"w-12","h-12","bg-orange-100","dark:bg-orange-900/30","rounded-xl","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-orange-600","dark:text-orange-400"],[1,"px-3","py-1","rounded-full","text-xs","font-medium"],[1,"text-lg","font-semibold","text-slate-800","dark:text-white","mb-1"],[1,"text-sm","text-slate-500","dark:text-slate-400","mb-4"],[1,"space-y-2","text-sm"],["class","flex items-center gap-2 text-slate-600 dark:text-slate-400",4,"ngIf"],[1,"flex","items-center","gap-2","text-slate-600","dark:text-slate-400"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"flex","gap-2","mt-4","pt-4","border-t","border-slate-200","dark:border-slate-700"],[1,"flex-1","px-3","py-2","text-sm","font-medium","text-blue-600","dark:text-blue-400","bg-blue-50","dark:bg-blue-900/20","rounded-lg","hover:bg-blue-100","dark:hover:bg-blue-900/30","transition-colors",3,"click"],[1,"flex-1","px-3","py-2","text-sm","font-medium","text-red-600","dark:text-red-400","bg-red-50","dark:bg-red-900/20","rounded-lg","hover:bg-red-100","dark:hover:bg-red-900/30","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"text-center","py-12"],[1,"w-24","h-24","bg-slate-100","dark:bg-slate-800","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-12","w-12","text-slate-400"],[1,"text-lg","font-medium","text-slate-800","dark:text-white","mb-2"],[1,"text-slate-500","dark:text-slate-400","mb-4"],[1,"px-4","py-2","bg-gradient-to-r","from-yellow-400","to-orange-500","text-slate-900","font-semibold","rounded-lg","hover:from-yellow-300","hover:to-orange-400","transition-all",3,"click"],[1,"fixed","inset-0","bg-black/50","backdrop-blur-sm","z-50","flex","items-center","justify-center","p-4"],[1,"bg-white","dark:bg-slate-800","rounded-2xl","shadow-2xl","w-full","max-w-lg","max-h-[90vh]","overflow-y-auto"],[1,"p-6","border-b","border-slate-200","dark:border-slate-700"],[1,"text-slate-400","hover:text-slate-600","dark:hover:text-slate-300",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6","space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","formControlName","matricula",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","focus:ring-2","focus:ring-yellow-500","focus:border-transparent"],["type","text","formControlName","movil",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","focus:ring-2","focus:ring-yellow-500","focus:border-transparent"],[1,"grid","grid-cols-3","gap-4"],["type","text","formControlName","marca",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","focus:ring-2","focus:ring-yellow-500","focus:border-transparent"],["type","text","formControlName","modelo",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","focus:ring-2","focus:ring-yellow-500","focus:border-transparent"],["type","text","formControlName","anio",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","focus:ring-2","focus:ring-yellow-500","focus:border-transparent"],["type","number","formControlName","kilometros",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","focus:ring-2","focus:ring-yellow-500","focus:border-transparent"],["formControlName","estado",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","focus:ring-2","focus:ring-yellow-500","focus:border-transparent"],["value","Activo"],["value","Disponible"],["value","Inactivo"],["value","Mantenimiento"],[1,"flex","gap-3","pt-4"],["type","button",1,"flex-1","px-4","py-2","border","border-slate-300","dark:border-slate-600","text-slate-700","dark:text-slate-300","font-medium","rounded-lg","hover:bg-slate-50","dark:hover:bg-slate-700","transition-colors",3,"click"],["type","submit",1,"flex-1","px-4","py-2","bg-gradient-to-r","from-yellow-400","to-orange-500","text-slate-900","font-semibold","rounded-lg","hover:from-yellow-300","hover:to-orange-400","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"disabled"],["class","animate-spin h-4 w-4","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(r,s){r&1&&(e(0,"div",0)(1,"aside",1)(2,"div",2)(3,"div",3)(4,"div",4),d(),e(5,"svg",5),n(6,"path",6),t()(),c(),e(7,"span",7),i(8,"TaxiAdmin"),t()()(),e(9,"nav",8)(10,"a",9),d(),e(11,"svg",10),n(12,"path",11),t(),i(13," Dashboard "),t(),c(),e(14,"a",12),d(),e(15,"svg",10),n(16,"path",13),t(),i(17," Choferes "),t(),c(),e(18,"a",14),d(),e(19,"svg",10),n(20,"path",6),t(),i(21," Coches "),t(),c(),e(22,"a",15),d(),e(23,"svg",10),n(24,"path",16),t(),i(25," Recaudaciones "),t()(),c(),e(26,"div",17)(27,"a",18),d(),e(28,"svg",10),n(29,"path",19),t(),i(30," Volver al Inicio "),t()()(),c(),e(31,"main",20)(32,"header",21)(33,"div",22)(34,"h1",23),i(35,"Gesti\xF3n de Coches"),t(),e(36,"button",24),u("click",function(){return s.openModal()}),d(),e(37,"svg",10),n(38,"path",25),t(),i(39," Nuevo Coche "),t()()(),c(),e(40,"div",26),v(41,U,2,0,"div",27)(42,W,9,1,"div",28)(43,Z,2,1,"div",29)(44,ee,10,0,"div",30),t()(),v(45,re,54,5,"div",31),t()),r&2&&(l(41),p("ngIf",s.loading),l(),p("ngIf",s.error),l(),p("ngIf",!s.loading&&!s.error),l(),p("ngIf",!s.loading&&!s.error&&s.coches.length===0),l(),p("ngIf",s.showModal))},dependencies:[F,I,T,G,N,J,A,R,$,P,D,q,H,z,O,B,L],styles:["[_nghost-%COMP%]{display:block}"]})};export{Q as CochesPage};
